document.addEventListener("DOMContentLoaded",function(){if(document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(t!=="#"){e.preventDefault();const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}})}),"IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"),n.classList.add("loaded")),t.unobserve(n)}})},{rootMargin:"50px 0px",threshold:.01});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}else document.querySelectorAll("img[data-src]").forEach(e=>{e.src=e.dataset.src,e.removeAttribute("data-src")});const t=document.createElement("a");t.href="#",t.className="back-to-top",t.innerHTML='<i class="fa-solid fa-arrow-up"></i>',t.setAttribute("aria-label","Back to top"),document.body.appendChild(t),window.addEventListener("scroll",()=>{window.scrollY>300?t.classList.add("visible"):t.classList.remove("visible")}),document.querySelectorAll('a[target="_blank"]').forEach(e=>{e.addEventListener("click",function(){const e=this.href;typeof umami!="undefined"&&umami.track("External Link",{url:e})})});const s=document.getElementById("search-input"),e=document.getElementById("search-results");s&&e&&s.addEventListener("input",debounce(function(t){const s=t.target.value.toLowerCase();if(s.length<2){e.innerHTML="",e.style.display="none";return}const o=document.querySelectorAll(".post-title, .project-title, .gig-title, .content h2, .content h3"),n=[];o.forEach(e=>{const t=e.textContent.toLowerCase();if(t.includes(s)){const t=e.closest("article, li");if(t){const s=t.querySelector("a");s&&n.push({title:e.textContent.trim(),url:s.href})}}}),n.length>0?(e.innerHTML=n.map(e=>`<li><a href="${e.url}">${e.title}</a></li>`).join(""),e.style.display="block"):(e.innerHTML="<li>No results found</li>",e.style.display="block")},300)),document.addEventListener("click",function(t){e&&!s.contains(t.target)&&!e.contains(t.target)&&(e.style.display="none")});const o=document.querySelector(".contact-form form");o&&o.addEventListener("submit",function(){typeof umami!="undefined"&&umami.track("Contact Form Submit")});const n=document.createElement("div");n.className="scroll-progress",n.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    height: 3px;
    background: var(--theme-color, #1565c0);
    width: 0%;
    z-index: 9999;
    transition: width 0.1s ease;
  `,document.body.appendChild(n),window.addEventListener("scroll",()=>{const e=window.scrollY,t=document.documentElement.scrollHeight-window.innerHeight,s=e/t*100;n.style.width=s+"%"})});function debounce(e,t){let n;return function(...s){const o=()=>{clearTimeout(n),e(...s)};clearTimeout(n),n=setTimeout(o,t)}}window.addEventListener("load",function(){document.body.classList.add("page-loaded")}),document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("search-input"),o=document.getElementById("search-results-page"),i=document.getElementById("search-empty"),a=document.querySelectorAll("#search-results-page .search-item"),r=document.querySelectorAll(".tag"),c=document.querySelectorAll(".category");if(!n||a.length===0)return;let e="none",t="none";r.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),r.forEach(e=>e.classList.remove("tag-active")),this.classList.add("tag-active"),e=this.dataset.tag,s()})}),c.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),c.forEach(e=>e.classList.remove("category-active")),this.classList.add("category-active"),t=this.dataset.category,s()})});function s(){const s=n?n.value.toLowerCase().trim():"";let r=0;a.forEach(n=>{const o=n.querySelector("h1")||n.querySelector("h2"),i=o?o.textContent.toLowerCase():"",a=n.querySelector("p")?n.querySelector("p").textContent.toLowerCase():"",c=n.dataset.tags?n.dataset.tags.split(","):[],l=n.dataset.categories?n.dataset.categories.split(","):[],d=s.length<2||i.includes(s)||a.includes(s),u=e==="none"||e===""||c.includes(e),h=t==="none"||t===""||l.includes(t);d&&u&&h?(n.style.display="block",r++):n.style.display="none"});const c=s.length>0||e!=="none"&&e!==""||t!=="none"&&t!=="";c?(o.style.display="flex",i.style.display="none"):(o.style.display="none",i.style.display="block")}n.addEventListener("input",debounce(function(){s()},200))})